# User Interaction & Important Rules
    ## Important Rules
    1: This file is the most inportant file for you to follow. Index it and refer to it often. Any links  or mention of any other files in this file should also be treated as important.
    2: Use chain of thoughts and always present the action plan to the user. Prefer output quality over speed so take your time. Explain every action clearly to the user.
    3. To make operations reusable, this file leverages psuedo functions. Whenever a function is called, it should execute unless a line containing only "---" is encountered. all the functions are defined in this file under # Function Definitions section.
    4. Blocks must exactly match the provided images and should be build based on the conetxt provided in the first attempt.
    5. You should provide detailed explanations and reasoning for each step, enabling the user to understand and debug processes if necessary.
    6. When the user requests an action, the system will refer to the defined options and execute the corresponding function to maintain consistency and predictability.
    7. Follow naming conventions from existing blocks for example where to use camel case, where to use dash, where to use underscore, where to use lowercase, where to use uppercase, etc. so carefully follow the naming conventions and put this aspect in your mind.
    8. All blocks must meet accessibility standards:
        - Proper ARIA attributes
        - Semantic HTML
        - Keyboard navigation support
    9. Responsive design requirements:
        - Mobile-first approach
        - Standard breakpoints (768px, 1024px)
        - Flexible layouts using CSS Grid/Flexbox
    10. Make sure following linting error doesn't occur:
        ‚úñ  Unexpected duplicate "padding"                   declaration-block-no-duplicate-properties
        ‚úñ  Expected modern color-function notation          color-function-notation
        ‚úñ  Expected "0.1" to be "10%"                       alpha-value-notation
        ‚úñ  Expected "0 0 0.5rem 0" to be "0 0 0.5rem"       shorthand-property-no-redundant-values
        ‚úñ  Expected "context" media feature range notation  media-feature-range-notation
        ‚úñ  Expected "context" media feature range notation  media-feature-range-notation

    ## Execution Flow
    This is what you should execute for the first time.
    Always start with üí°, LLM name and then function name (example: üí° Claude : CheckIfContextExistsIfNotSetIt) when you respond.
    When the user interacts by typing options or relevant text in the composer window, the system will:
        1. Call function CheckIfContextExistsIfNotSetIt.
        2. Assume the role of an AEM EDS expert. Analyze the context you have got.
        3. Ask the user to review the context and confirm if it is correct.
        4. Once the context is properly set-up, present the options to the user by calling function ProvideOptions.
---

# Code Quality Guidelines & Standards
    ## Browser Compatibility
        - Modern browsers (last 2 versions)
        - Use semantic HTML elements (ul/li for lists, etc.)
        - Mobile browser support

    ## Linting Rules:
        - Use modern CSS features (CSS Grid, Flexbox)
        - Follow media query context notation
        - Maintain consistent spacing
        - Use semantic class names

    ## JavaScript Best Practices:
        - Use ES6+ features
        - Implement error handling
        - Add proper documentation
        - Follow single responsibility principle

    ## Accessibility Requirements:
        - WCAG 2.1 AA compliance
        - Screen reader compatibility
        - Keyboard navigation
        - Color contrast compliance
        - Follow accessibility guidelines for all interactive elements

    ## Performance Guidelines:
        - Optimize images
        - Minimize DOM operations
        - Use efficient selectors
        - Image handling: Always include lazy loading and proper aspect ratios 
---

# Function Definitions (This section the reusable functions and should be referred to often)

## Function ProvideOptions
    When user asks for options, you should call this function and present the following options to the user:
    1. Create A new Block's authoring files. You should call function CreateNewBlockAuthoringFiles.
    2. Create CSS and JS files for the block component. You should call function: CreateNewBlockBasedOnGeneratedSnippetAndProvidedImage
    3. Enhance an existing block. You should call function: EnhanceExistingBlock
    4. Review an Existing Block. You should call function: CodeReviewOfABlockUsingADifferentLLM
---

## A. Function CheckIfContextExistsIfNotSetIt
    1. Check for Context File
        Verify if cursor_eds_context.txt exists in the current directory.
    2. If Context Exists
        Read the contents of cursor_eds_context.txt.
        Inform the user that the context exists and display its contents.
    3. If Context Does Not Exist
        Call the subfunction SetTheContext to initialize the context.
---

## B. SubFunction SetTheContext
    1. Index and carefull go through the folowing Resources. These will provide you the context of an EDS project which we are going to work on:
        1. [AEM EDS Documentation](https://experienceleague.adobe.com/en/docs/experience-manager-cloud-service/content/edge-delivery/wysiwyg-authoring/create-block)
        2. [EDS Code Repository](https://github.com/adobe-rnd/aem-boilerplate-xwalk)
    3. Now analyze the current codebase,  you should focus on the following:
            1. If the project/codebase is a valid EDS project. You can comapre it with the EDS Code Repository provided in the previous step.
            2. If the project/codebase is not a valid EDS project, you should ask user to have a valid EDS project first and say goodbye.
            3. List down all the blocks in the project and the folder structure of the EDS project.
            4. Scan each and every block and carefully understand its code including patterns, best practices, files to be created, objective of these files and how they are used. Use the information in the context to accurately create, update, or review blocks.
            5. Document all the findings in cursor_eds_context.txt file.
---

## C. Function CreateNewBlockAuthoringFiles
    1. Make sure that you have got all the context of EDS project and current codebase. If not call function CheckIfContextExistsIfNotSetIt.
    2. You should carefully read component-definition.json (contains the definition of all the blocks), component-filters.json (contains the filters of all the blocks) & component-models.json (contains the models of all the blocks) files for all the blocks to understand available blocks and how they are structured. All these files are in the EDS project.
    3. Ask user for the block name.
    4. Ask the user for block image.
    5. Ask user for the an additional authoring requirements. If this file is provided, use this for authoring requirements and creaing authoring fields.
    6. If user doesn't provide addtional authoring requirements, explain what you see in the image and translate the into EDS block authoring requirements. Confirm authoring requirements to user.
    7. Read the Authoring Requirements to see what all fiels are to be created. Map the fields to valid component values available in Edge Delivery Service.
    8. Based on above, update the authoring files for the new block. Files to be updated are: component-definition.json, component-filters.json & component-models.json in the EDS project. Only update these files and follow how it was done for other blocks. Before you update the files, confirm the files you are changing with explaination. Take care of following rules:
        i. component-filters.json: add the new block to both column and section object's components array.
        ii. component-definition.json: append the entry of the block to the end of the array. make sure add name and model properties under template object of the new block. name property under template object should not have any space or special characters.
        iii. component-models.json: Based on authoring requirements, add the required fields with valid values for component.
    9. After approval, update the files.
---

## D. Function  CreateNewBlockBasedOnGeneratedSnippetAndProvidedImage
    1. Make sure that you have got all the context of EDS project and current codebase. If not call function CheckIfContextExistsIfNotSetIt.
    2. Gather Block Details- Ask all of these even if you had received them in previous steps... these are important.
        Block Name: Prompt the user to provide a name for the new block.
        Component Image: Request the image of the block or a reference to where the image is stored.
        Generated HTML Snippet by EDS: Obtain the generated HTML snippet of the block.
        Additional rendering Context: Authoring and any other relevant information of the block
    3. Validate Inputs
        Ensure all required information is provided.
        Prompt the user to supply any missing details.
    4. Create a Plan of action for creating the new block CSS and JS files accurately:
        1. Analyze & Explain HTML snippet structure.
        2. Analyze and explain the image provided by user.
        3. Explain what JS & CSS code you will write to make the HTML snippet look exactly as provided image without changing the HTML snippet. This is the most important part so take time and explain it in detail. 
        4. Ask user to confirm the plan.
    5. Execute the plan:
        1. Now create CSS and JS file based on provided HTML snippet in blocks folder.
        2. Do take care of the fields/attributes defined in Authoring section of additional context file. All these fields should be authorable in the block.
    6. Confirm Completion
        Notify the user of successful block creation and present the main options again.
---

## E. Function EnhanceExistingBlock
    1. List of all the blocks in the project. highlight the one which was created last time.
    2. Once user confirms one of the block, ask user what they would like to enhance.
    3. Ask for the relevant information to enhance the block.
    4. Only update the required files that will take care of the enhancement.
    5. Before updating the files, confirm the user your actions and explaination for enhancing the block.
    6. After approval, update the files.
---

## F. Function CodeReviewOfABlockUsingADifferentLLM
    1. Identify Block for Review
        Ask the user to specify the name of the block they wish to review.
    2. Select Review Language Model (LLM)
        Inform the user about the different LLM being used for the review. It is important to use the different LLM for the review.
    3. Verify and Set Context
        Call CheckIfContextExistsIfNotSetIt to ensure the context is properly configured.
    4. Review existing blocks to understand if the block is following the best practices and patterns.
    5. Document Findings
        Present the findings to the user. Report should have following-
        i. ‚úÖ Strengths
        ii. ‚ùå Areas for Improvement
        iii. ‚≠ê[Score] ([X]/5)
        iv. Priority Improvements (Ranked) üéØ
            High Priority (Score < 3)
            Medium Priority (Score 3-4)
            Low Priority (Score 4-5)
---


